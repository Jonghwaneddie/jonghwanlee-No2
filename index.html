<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargo Demo Site Index</title>
    <link rel="stylesheet" href="styles.css"> 
    <!-- Pretendard 폰트 로드 --><link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css" />
</head>
<body>

    <header class="main-header">
        
        <!-- 상단 메뉴 --><div class="top-text top-jhl" id="jhl-reset"><a href="#">Jonghwan Lee</a></div>
        <!-- 모바일에서 오른쪽 상단 링크들을 묶기 위한 래퍼 -->
        <div class="top-links-mobile"> 
            <div class="top-text top-info">Information</div>
            <!-- ⭐ Note 링크 ⭐ --><div class="top-text top-note"><a href="/note">Note</a></div>
            <div class="top-text top-cv"><a href="/cv">CV</a></div>
            <!-- ⭐ Contact 링크 (데스크톱에서 오른쪽 상단에 배치됨) ⭐ --><div class="top-text top-contact"><a href="/contact">Contact</a></div>
            <div class="top-text top-works">Works</div>
        </div>
    </header>

    <div class="main-content-wrapper">

        <section class="left-panel">
            <div class="cv-info">
                <p class="indented-text deep-indent">Vestibulum et dignissim magna. Nullam et ultrices felis. Suspendisse facilisis sagittis sit amet sem tempor. Nam sit amet nibh et enim laoreet porta sit amet vel purus. Maecenas augue velit, feugiat in maximus id, auctor vel ex.</p>
            </div>

            <div class="project-table">
                <div class="table-row header">
                    <span class="exhibition">Exhibition</span>
                    <span class="tilte">Title</span>
                    <span class="year">Year</span>
                </div>
                
                <!-- 테이블 인덱스 항목 --><div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Loggia">Loggia</a></span>
                    <span class="year">2025</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Surgical Room">Surgical Room</a></span>
                    <span class="year">2025</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="South Parade">CYLINDER x South Parade</a></span>
                    <span class="year">2024</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Hypercube">Hypercube</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="The Good Neighbor">The Good Neighbor (좋은이웃)</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Cabinet">Cabinet</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Waiting Room">Waiting Room</a></span>
                    <span class="year">2022</a></span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Perigee Winter Show">Perigee Winter Show 2022</a></span>
                    <span class="year">2022</span>
                </div>
                 <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="The Wild Bunch">The Wild Bunch</a></span>
                    <span class="year">2022</span>
                </div>
                 <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Fonds">Fonds</a></span>
                    <span class="year">2022</span>
                </div>
                 <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Room of Convexity and Concavity">Room of Convexity and Concavity (철요의 방)</a></span>
                    <span class="year">2022</span>
                </div>
                 <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="TORQUE 1">TORQUE 1 / GEAR SHIFT,</a></span>
                    <span class="year">2021</span>
                </div>
            </div>
            
        </section>

        <section class="right-panel">
            <div class="selected-work-list">
                <!-- ⭐ 동적으로 변경될 텍스트 ⭐ -->
                <div class="work-intro-text">Loggia (2025)<br><br>
                    2025. 7. 31 ~ 2025. 8. 23<br>
                    Hall1, 8, Yangpyeong-ro 22ma-gil, Yeongdeungpo-gu, Seoul, Korea</div>
                <!-- 작업물 목록 (work-item) -->
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder 1]</div><div class="work-header"><span class="client">SED_DO</span></article>
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder 2]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. R/XTR-082 (Visual 2/3)</span><span class="year">2049</span></div></article>
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder 3]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. R/XTR-082 (Visual 3/3)</span><span class="year">2049</span></div></article>
                
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder 4]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. R/PRT-017 (Visual 1/3)</span><span class="year">2048-9</span></div></article>
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder 5]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. R/PRT-017 (Visual 2/3)</span><span class="year">2048-9</span></div></article>
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder 6]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. R/PRT-017 (Visual 3/3)</span><span class="year">2048-9</span></div></article>

                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 7]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">R/CXX-500 (Visual 1/3)</span><span class="year">2047</span></div></article>
                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 8]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">R/CXX-500 (Visual 2/3)</span><span class="year">2047</span></div></article>
                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 9]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">R/CXX-500 (Visual 3/3)</span><span class="year">2047</span></div></article>

                <article class="work-item" data-project-id="qor-809"><div class="work-visual">[Image Placeholder 10]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. X/QOR-809 (Solo)</span><span class="year">2042</span></div></article>
                <article class="work-item" data-project-id="tsl-203"><div class="work-visual">[Image Placeholder 11]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">X/TSL-203 (Group)</span><span class="year">2039</span></div></article>
                <article class="work-item" data-project-id="tur-444"><div class="work-visual">[Image Placeholder 12]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">V/TUR-444</span><span class="year">2033</span></div></article>
                <article class="work-item" data-project-id="qor-809"><div class="work-visual">[Image Placeholder 13]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">Ref. X/QOR-809 (Group)</span><span class="year">2042</span></div></article>
                <article class="work-item" data-project-id="tsl-203"><div class="work-visual">[Image Placeholder 14]</div><div class="work-header"><span class="client">SED_DO</span><span class="ref">X/TSL-203 (Group 2)</span><span class="year">2039</span></div></article>
            </div>
        </section>

    </div>
    
    <!-- 전체 화면 모달 (Lightbox) --><div id="fullscreen-modal" class="fullscreen-modal">
        <span class="modal-close">&times;</span>
        <div id="prev-btn" class="modal-nav-btn prev-btn">&#10094;</div>
        <div id="modal-image-container" class="modal-content">
            <!-- 이미지 내용이 여기에 삽입됩니다. --></div>
        <div id="next-btn" class="modal-nav-btn next-btn">&#10095;</div>
        <div id="modal-caption" class="modal-caption"></div> <!-- ⭐ 캡션 영역 추가 ⭐ -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const projectLinks = document.querySelectorAll('.project-table .tilte a');
            const workItems = document.querySelectorAll('.right-panel .work-item');
            const workVisuals = document.querySelectorAll('.work-visual'); 
            const jhlReset = document.getElementById('jhl-reset');
            const workIntroText = document.querySelector('.work-intro-text'); // ⭐ 추가: 텍스트 요소 참조 ⭐

            let activeFilterId = null; 
            
            const modal = document.getElementById('fullscreen-modal');
            const modalImageContainer = document.getElementById('modal-image-container');
            const modalClose = modal.querySelector('.modal-close');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const modalCaption = document.getElementById('modal-caption'); 

            let currentModalIndex = 0;
            let currentModalProjectId = null;
            let filteredWorkVisuals = []; 

            // 각 work-visual에 data-index와 data-project-id 할당
            workVisuals.forEach((visual, index) => {
                visual.dataset.index = index; 
                visual.dataset.projectId = visual.closest('.work-item').dataset.projectId;
            });

            const updateModalContent = (index, projectId) => {
                const targetVisual = filteredWorkVisuals.find(v => 
                    v.dataset.index == index && v.dataset.projectId == projectId
                );
                
                if (targetVisual) {
                    modalImageContainer.innerHTML = targetVisual.innerHTML;
                    currentModalIndex = parseInt(targetVisual.dataset.index);
                    currentModalProjectId = targetVisual.dataset.projectId;
                    
                    const correspondingWorkItem = targetVisual.closest('.work-item');
                    
                    if (correspondingWorkItem) {
                        const headerContent = correspondingWorkItem.querySelector('.work-header').innerHTML;
                        modalCaption.innerHTML = `<div class="work-header">${headerContent}</div>`;
                    } else {
                        modalCaption.innerHTML = '';
                    }

                }
                updateNavButtons();
            };

            const updateNavButtons = () => {
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                const currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.index) === currentModalIndex);
                
                if (currentIndexInProject === 0) {
                    prevBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'block';
                }

                if (currentIndexInProject === projectImages.length - 1) {
                    nextBtn.style.display = 'none';
                } else {
                    nextBtn.style.display = 'block';
                }
            };

            const resetFilter = () => {
                workItems.forEach(item => item.classList.remove('hidden'));
                projectLinks.forEach(l => l.style.fontWeight = 'normal');
                activeFilterId = null;
                document.querySelector('.right-panel').scrollTop = 0;
                
                // ⭐ 텍스트 초기화 및 표시 ⭐
                workIntroText.textContent = 'Recently Exhibition';
                
                filteredWorkVisuals = Array.from(workVisuals);
                updateNavButtons(); 
            };

            resetFilter(); 

            projectLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    const projectId = event.currentTarget.dataset.projectId;
                    const projectTitle = event.currentTarget.textContent; // ⭐ 추가: 클릭된 링크 텍스트 가져오기 ⭐

                    if (projectId === activeFilterId) {
                        resetFilter();
                    } else {
                        workItems.forEach(item => {
                            item.classList.add('hidden');
                        });

                        const selectedItems = document.querySelectorAll(`.work-item[data-project-id="${projectId}"]`);
                        selectedItems.forEach(item => {
                            item.classList.remove('hidden');
                        });
                        
                        activeFilterId = projectId;
                        
                        // ⭐ 텍스트 내용 업데이트 ⭐
                        workIntroText.textContent = projectTitle.trim().toUpperCase();
                        
                        filteredWorkVisuals = Array.from(workVisuals).filter(visual => 
                            visual.closest('.work-item').dataset.projectId === projectId
                        );

                        projectLinks.forEach(l => l.style.fontWeight = 'normal');
                        event.currentTarget.style.fontWeight = 'bold';
                        
                        document.querySelector('.right-panel').scrollTop = 0;
                    }
                });
            });

            if (jhlReset) {
                jhlReset.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    resetFilter();
                });
            }
            
            workVisuals.forEach(visual => {
                visual.addEventListener('click', () => {
                    currentModalIndex = parseInt(visual.dataset.index);
                    currentModalProjectId = visual.dataset.projectId;
                    updateModalContent(currentModalIndex, currentModalProjectId);
                    modal.classList.add('show');
                });
            });
            
            modalClose.addEventListener('click', () => {
                modal.classList.remove('show');
            });

            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.classList.remove('show');
                }
            });
            
            document.addEventListener('keydown', (event) => {
                if (modal.classList.contains('show')) {
                    if (event.key === 'Escape') {
                        modal.classList.remove('show');
                    } else if (event.key === 'ArrowLeft') {
                        prevBtn.click();
                    } else if (event.key === 'ArrowRight') {
                        nextBtn.click();
                    }
                }
            });

            prevBtn.addEventListener('click', () => {
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                let currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.index) === currentModalIndex);
                
                if (currentIndexInProject > 0) {
                    const prevVisual = projectImages[currentIndexInProject - 1];
                    updateModalContent(parseInt(prevVisual.dataset.index), prevVisual.dataset.projectId);
                }
            });

            nextBtn.addEventListener('click', () => {
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                let currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.index) === currentModalIndex);
                
                if (currentIndexInProject < projectImages.length - 1) {
                    const nextVisual = projectImages[currentIndexInProject + 1];
                    updateModalContent(parseInt(nextVisual.dataset.index), nextVisual.dataset.projectId);
                }
            });
        });
    </script>
</body>
</html>
