<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargo Demo Site Index</title>
    <!-- Pretendard 폰트 로드 -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css" />
    <style>
        /* 기본 리셋 */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* 스크롤 고정 핵심 */
        html, body {
            height: 100%; /* 뷰포트 높이 전체 차지 */
        }

        a {
            color: inherit;
            text-decoration: none;
            cursor: pointer;
        }

        body {
            /* Pretendard 폰트 적용 */
            font-family: 'Pretendard', sans-serif; 
            font-size: 13px;
            color: #000;
            display: flex;
            flex-direction: column; /* 세로로 배치 */
            overflow: hidden; /* 화면 전체 스크롤 방지 (데스크톱) */
        }

        /* 1. 헤더 */
        .main-header {
            position: relative;
            padding: 10px 0;
            height: 40px; /* 고정 높이 */
            flex-shrink: 0;
        }

        /* 공통: 상단 텍스트 스타일 */
        .top-text {
            position: absolute;
            font-size: 14px;
            top: 10px;
            white-space: nowrap;
        }

        .top-jhl { left: 20px; }
        .top-info { left: 180px; } 
        .top-note { left: 360px; } 
        .top-cv { left: 510px; } 
        .top-works { left: calc(40% + 20px); } 

        /* ⭐ 데스크톱: Contact를 오른쪽 상단 구석에 배치 ⭐ */
        .top-contact { right: 20px; left: auto; } 

        /* 2. 메인 콘텐츠 래퍼 (좌우 40:60 레이아웃) */
        .main-content-wrapper {
            display: flex; 
            flex: 1; 
            overflow: hidden; 
        }

        /* 3. 왼쪽 패널 (정보 및 인덱스) */
        .left-panel {
            width: 40%; 
            height: 100%;
            padding: 20px;
            overflow-y: auto; 
        }

        .cv-info {
            margin-top: 5px; 
            margin-bottom: 30px;
        }

        /* information 글 들여쓰기 */
        .cv-info .deep-indent {
            margin-left: 160px; 
            padding-left: 0;
            line-height: 1.4;
            text-align: justify;
        }

        /* 3-2. 프로젝트 인덱스 테이블 스타일 (Grid 사용) */
        .project-table {
            margin-top: 20px;
        }

        .table-row {
            display: grid;
            grid-template-columns: 1fr 2fr 0.5fr; 
            padding: 5px 0;
        }

        /* 테이블 헤더 스타일 */
        .table-row.header {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        /* 4. 오른쪽 패널 (스크롤 가능한 영역) */
        .right-panel {
            width: 60%; 
            height: 100%;
            overflow-y: scroll; 
            padding: 20px;
        }

        /* ⭐ 첫 번째 작업물 위에 들어갈 텍스트 스타일 (왼쪽 정렬) ⭐ */
        .work-intro-text {
            text-align: left; 
            font-size: 14px;
            font-weight: normal; 
            margin-bottom: 30px; 
            padding-top: 5px; 
            padding-left: 15px; 
        }


        /* 작업물 항목 스타일링 */
        .work-item {
            margin-bottom: 30px; 
            padding: 15px;
        }

        /* 작업물 헤더 (텍스트): 한 줄 왼쪽 정렬로 변경 */
        .work-header {
            display: flex; 
            justify-content: flex-start; /* 왼쪽 정렬 */
            font-size: 14px;
            font-weight: normal; 
            margin-top: 10px; 
            flex-wrap: nowrap; 
            padding-left: 0px; /* .work-item의 padding을 따르도록 */
            text-align: left;
        }

        /* 헤더 내부의 텍스트 요소들: 단일 블록으로 간주하고 간격 조정 */
        .work-header span {
            display: inline; 
            margin: 0; /* 간격 제거 */
            line-height: 1.2;
            white-space: normal; /* 텍스트가 길어질 경우 줄바꿈 허용 */
        }
        
        /* 작업물 내부의 텍스트를 한 줄로 표시할 때 필요한 간격만 CSS로 부여 (HTML에서 슬래시로 구분) */
        .work-header .full-description {
            margin-right: 5px; /* 텍스트가 시작하는 위치에 작은 마진 */
            white-space: normal;
        }

        .work-visual {
            height: 300px; 
            background-color: #fcfcfc;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #bbb;
            font-style: italic;
            cursor: pointer; 
        }


        /* 5. 전체 화면 모달 스타일 */

        .fullscreen-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7); 
            display: none; 
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .fullscreen-modal.show {
            display: flex;
        }

        #modal-image-container { 
            max-width: 80%; 
            max-height: 80%; 
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fcfcfc; 
            padding: 20px;
            color: #bbb; 
            font-size: 24px;
            font-style: italic;
            
            width: 100%; 
            height: 100%;
            object-fit: contain; 
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 40px;
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .modal-close:hover {
            opacity: 1;
        }

        /* ⭐ 이전/다음 버튼 스타일 ⭐ */
        .modal-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 50px;
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
            user-select: none; 
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .modal-nav-btn:hover {
            opacity: 1;
        }

        .prev-btn {
            left: 20px;
        }

        .next-btn {
            right: 20px;
        }

        /* ⭐ 모달 캡션/푸터 스타일 ⭐ */
        .modal-caption {
            position: absolute;
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%); 
            max-width: 80%; 
            color: white; 
            text-align: center;
            font-size: 14px;
            padding: 10px;
            z-index: 1010; 
        }

        /* 캡션 내부의 work-header 스타일 재정의 */
        .modal-caption .work-header {
            display: flex; 
            justify-content: center; /* 모달 캡션은 중앙 정렬 유지 */
            font-size: 14px;
            font-weight: normal;
            margin: 0; 
            flex-wrap: nowrap; 
            padding-left: 0;
            text-align: center;
        }
        /* 모달 캡션 텍스트는 간격을 유지 */
        .modal-caption .work-header .full-description {
            margin: 0; 
        }


        /* JS 상호작용을 위한 숨김 클래스 */
        .work-item.hidden {
            display: none;
        }


        /* 6. 모바일 레이아웃 (최대 768px) */
        @media (max-width: 768px) {
            /* 기본 스크롤 동작 복원 */
            body {
                overflow-y: visible; 
                height: auto;
            }
            
            /* 1. 헤더 재배치 및 간소화 */
            .main-header {
                height: auto;
                padding: 10px 20px;
                display: flex;
                justify-content: space-between; /* Jonghwan Lee와 메뉴 그룹 분리 */
                align-items: flex-start;
            }
            
            /* 기존 absolute 포지션 제거 */
            .top-text {
                position: static;
                font-size: 13px;
            }
            
            /* 'Jonghwan Lee'를 왼쪽 상단에 배치 */
            .top-jhl { 
                order: 1; 
                font-weight: bold; 
            }
            
            /* 오른쪽 상단 링크들을 flex로 묶어서 배치 */
            .main-header .top-links-mobile {
                order: 2;
                display: flex;
                gap: 10px;
            }

            /* 'Works' 메뉴는 계속 숨김 */
            .top-works, .main-header .logo { 
                display: none; 
            }
            
            /* ⭐ 변경: 모바일에서 Information, Note, CV, Contact 모두 보이게 설정 ⭐ */
            .top-info, .top-note, .top-cv, .top-contact {
                display: block; 
                font-weight: normal; /* Contact의 굵은 글씨체도 통일 */
                margin-left: 0;
            }
            
            /* Contact만 굵게 표시하고 싶다면 아래 주석을 해제하세요. */
            /* .top-contact { font-weight: bold; } */
            
            /* 2. 메인 콘텐츠를 수직으로 쌓기 */
            .main-content-wrapper {
                flex-direction: column;
                overflow-y: visible; 
                flex: none; 
                height: auto;
            }

            /* 3. 좌우 패널 너비 100%로 설정 및 순서 명시 */
            .left-panel {
                order: 1; 
                width: 100%;
                height: auto; 
                overflow-y: visible; 
                flex-shrink: 0;
                padding: 20px;
                display: flex;
                flex-direction: column;
            }
            
            .right-panel {
                order: 2; 
                width: 100%;
                height: auto; 
                overflow-y: visible; 
                flex-shrink: 0;
                padding: 20px;
                padding-top: 0; 
                padding-bottom: 80px; 
            }

            /* 4. 정보 텍스트 조정 */
            .cv-info {
                order: 1; 
                margin-top: 0; 
                margin-bottom: 30px; 
            }

            .cv-info .deep-indent {
                margin-left: 0; 
            }
            
            /* 5. 프로젝트 인덱스 테이블 표시 및 순서 설정 */
            .project-table {
                display: grid; 
                order: 2; 
                margin-top: 0; 
                margin-bottom: 20px; 
            }
            
            /* ⭐ 모바일 텍스트 조정 (왼쪽 정렬 유지) ⭐ */
            .work-intro-text {
                text-align: left; 
                margin-bottom: 20px; 
                padding-left: 15px; 
            }

            /* 6. Work Header 스타일 조정 (왼쪽 정렬) */
            .work-header {
                justify-content: flex-start; /* 모바일에서도 왼쪽 정렬 유지 */
                font-size: 13px;
                font-weight: normal; 
                flex-wrap: wrap; 
                text-align: left;
                padding-left: 0;
            }
            
            .work-header .full-description {
                margin: 0; 
                line-height: 1.5;
                white-space: normal; 
            }
            
            /* 7. 모달 내비게이션 버튼 크기 조정 */
            .modal-nav-btn {
                font-size: 30px; 
            }
            
            /* 8. 모달 캡션 조정 */
            .modal-caption {
                bottom: 10px;
                padding: 5px 10px;
            }
            
            .modal-caption .work-header {
                justify-content: center; 
            }

            /* 모바일 모달 캡션 텍스트 줄바꿈 방지 유지 */
            .modal-caption .work-header span {
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>

    <header class="main-header">
        
        <!-- 상단 메뉴 -->
        <div class="top-text top-jhl" id="jhl-reset"><a href="#">Jonghwan Lee</a></div>
        
        <!-- 모바일에서 오른쪽 상단 링크들을 묶기 위한 래퍼 -->
        <div class="top-links-mobile"> 
            <div class="top-text top-info">Information</div>
            <!-- ⭐ Note 링크 ⭐ -->
            <div class="top-text top-note"><a href="/note">Note</a></div>
            <div class="top-text top-cv"><a href="/cv">CV</a></div>
            <!-- ⭐ Contact 링크 (데스크톱에서 오른쪽 상단에 배치됨) ⭐ -->
            <div class="top-text top-contact"><a href="/contact">Contact</a></div>
            <div class="top-text top-works">Works</div>
        </div>
    </header>

    <div class="main-content-wrapper">

        <section class="left-panel">
            <div class="cv-info">
                <p class="indented-text deep-indent">Vestibulum et dignissim magna. Nullam et ultrices felis. Suspendisse facilisis sagittis sit amet sem tempor. Nam sit amet nibh et enim laoreet porta sit amet vel purus. Maecenas augue velit, feugiat in maximus id, auctor vel ex.</p>
            </div>

            <div class="project-table">
                <div class="table-row header">
                    <span class="exhibition">Exhibition</span>
                    <span class="tilte">Title</span>
                    <span class="year">Year</span>
                </div>
                
                <!-- 테이블 인덱스 항목: data-display-title 속성을 추가하여 커스텀 텍스트 지정 -->
                <div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Loggia" data-display-title="Loggia, Solo Show (2025)">Loggia</a></span>
                    <span class="year">2025</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Surgical Room" data-display-title="Surgical Room, Group Exhibition (2025)">Surgical Room</a></span>
                    <span class="year">2025</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="South Parade" data-display-title="CYLINDER x South Parade (2024)">CYLINDER x South Parade</a></span>
                    <span class="year">2024</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Hypercube" data-display-title="Hypercube, Solo Exhibition (2023)">Hypercube</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="The Good Neighbor" data-display-title="The Good Neighbor (좋은이웃) - 2023 Group">The Good Neighbor (좋은이웃)</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Solo</span>
                    <span class="tilte"><a href="#" data-project-id="Cabinet" data-display-title="Cabinet - Solo, Seoul (2023)">Cabinet</a></span>
                    <span class="year">2023</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Waiting Room" data-display-title="Waiting Room (Group, 2022)">Waiting Room</a></span>
                    <span class="year">2022</a></span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Perigee Winter Show" data-display-title="Perigee Winter Show 2022">Perigee Winter Show 2022</a></span>
                    <span class="year">2022</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="The Wild Bunch" data-display-title="The Wild Bunch, Group (2022)">The Wild Bunch</a></span>
                    <span class="year">2022</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Fonds" data-display-title="Fonds, Group Exhibition (2022)">Fonds</a></span>
                    <span class="year">2022</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="Room of Convexity and Concavity" data-display-title="Room of Convexity and Concavity (철요의 방)">Room of Convexity and Concavity (철요의 방)</a></span>
                    <span class="year">2022</span>
                </div>
                <div class="table-row item">
                    <span class="exhibition">Group</span>
                    <span class="tilte"><a href="#" data-project-id="TORQUE 1" data-display-title="TORQUE 1 / GEAR SHIFT (2021)">TORQUE 1 / GEAR SHIFT,</a></span>
                    <span class="year">2021</span>
                </div>
            </div>
            
        </section>

        <section class="right-panel">
            <div class="selected-work-list">
                <!-- ⭐ 동적으로 변경될 텍스트 ⭐ -->
                <div class="work-intro-text">Recently Exhibition</div>

                <!-- ---------------------------------------------------- -->
                <!-- ⭐ [START] 인덱스 전용 이미지 5장 (INDEX_DEFAULT) ⭐ -->
                <!-- ---------------------------------------------------- -->
                <article class="work-item" data-project-id="INDEX_DEFAULT" data-is-default="true"><div class="work-visual">[INDEX IMAGE 1]</div><div class="work-header"><span class="full-description">Group Exhibition / Selected Works 2024 / 1 / 2024</span></div></article>
                <article class="work-item" data-project-id="INDEX_DEFAULT" data-is-default="true"><div class="work-visual">[INDEX IMAGE 2]</div><div class="work-header"><span class="full-description">Group Exhibition / Selected Works 2024 / 2 / 2024</span></div></article>
                <article class="work-item" data-project-id="INDEX_DEFAULT" data-is-default="true"><div class="work-visual">[INDEX IMAGE 3]</div><div class="work-header"><span class="full-description">Solo Exhibition / Selected Works 2023 / 1 / 2023</span></div></article>
                
                <article class="work-item" data-project-id="INDEX_DEFAULT" data-is-default="true"><div class="work-visual">[INDEX IMAGE 4]</div><div class="work-header"><span class="full-description">Solo Exhibition / Selected Works 2023 / 2 / 2023</span></div></article>
                <article class="work-item" data-project-id="INDEX_DEFAULT" data-is-default="true"><div class="work-visual">[INDEX IMAGE 5]</div><div class="work-header"><span class="full-description">Group Exhibition / Selected Works 2022 / 1 / 2022</span></div></article>
                <!-- ---------------------------------------------------- -->
                <!-- ⭐ [END] 인덱스 전용 이미지 5장 (INDEX_DEFAULT) ⭐ -->
                <!-- ---------------------------------------------------- -->


                <!-- 기존 프로젝트 Loggia 항목: 텍스트 통합 -->
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder Loggia 1/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/XTR-082 (Visual 1/3) / 2049</span></div></article>
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder Loggia 2/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/XTR-082 (Visual 2/3) / 2049</span></div></article>
                <article class="work-item" data-project-id="Loggia"><div class="work-visual">[Image Placeholder Loggia 3/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/XTR-082 (Visual 3/3) / 2049</span></div></article>

                <!-- 기존 프로젝트 prt-017 항목: 텍스트 통합 -->
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder prt-017 1/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/PRT-017 (Visual 1/3) / 2048-9</span></div></article>
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder prt-017 2/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/PRT-017 (Visual 2/3) / 2048-9</span></div></article>
                <article class="work-item" data-project-id="prt-017"><div class="work-visual">[Image Placeholder prt-017 3/3]</div><div class="work-header"><span class="full-description">SED_DO / Ref. R/PRT-017 (Visual 3/3) / 2048-9</span></div></article>

                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 7]</div><div class="work-header"><span class="full-description">SED_DO / R/CXX-500 (Visual 1/3) / 2047</span></div></article>
                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 8]</div><div class="work-header"><span class="full-description">SED_DO / R/CXX-500 (Visual 2/3) / 2047</span></div></div work-item>
                <article class="work-item" data-project-id="cxx-500"><div class="work-visual">[Image Placeholder 9]</div><div class="work-header"><span class="full-description">SED_DO / R/CXX-500 (Visual 3/3) / 2047</span></div></article>

                <article class="work-item" data-project-id="qor-809"><div class="work-visual">[Image Placeholder 10]</div><div class="work-header"><span class="full-description">SED_DO / Ref. X/QOR-809 (Solo) / 2042</span></div></article>
                <article class="work-item" data-project-id="tsl-203"><div class="work-visual">[Image Placeholder 11]</div><div class="work-header"><span class="full-description">SED_DO / X/TSL-203 (Group) / 2039</span></div></article>
                <article class="work-item" data-project-id="tur-444"><div class="work-visual">[Image Placeholder 12]</div><div class="work-header"><span class="full-description">SED_DO / V/TUR-444 / 2033</span></div></article>
                <article class="work-item" data-project-id="qor-809"><div class="work-visual">[Image Placeholder 13]</div><div class="work-header"><span class="full-description">SED_DO / Ref. X/QOR-809 (Group) / 2042</span></div></article>
                <article class="work-item" data-project-id="tsl-203"><div class="work-visual">[Image Placeholder 14]</div><div class="work-header"><span class="full-description">SED_DO / X/TSL-203 (Group 2) / 2039</span></div></article>
            </div>
        </section>

    </div>
    
    <!-- 전체 화면 모달 (Lightbox) -->
    <div id="fullscreen-modal" class="fullscreen-modal">
        <span class="modal-close">&times;</span>
        <div id="prev-btn" class="modal-nav-btn prev-btn">&#10094;</div>
        <div id="modal-image-container" class="modal-content">
            <!-- 이미지 내용이 여기에 삽입됩니다. -->
        </div>
        <div id="next-btn" class="modal-nav-btn next-btn">&#10095;</div>
        <div id="modal-caption" class="modal-caption"></div> <!-- ⭐ 캡션 영역 추가 ⭐ -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const projectLinks = document.querySelectorAll('.project-table .tilte a');
            const workItems = document.querySelectorAll('.right-panel .work-item');
            const workVisuals = document.querySelectorAll('.work-visual'); 
            const jhlReset = document.getElementById('jhl-reset');
            const workIntroText = document.querySelector('.work-intro-text'); 

            let activeFilterId = null; 
            
            const modal = document.getElementById('fullscreen-modal');
            const modalImageContainer = document.getElementById('modal-image-container');
            const modalClose = modal.querySelector('.modal-close');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const modalCaption = document.getElementById('modal-caption'); 

            let currentModalIndex = 0;
            let currentModalProjectId = null;
            let filteredWorkVisuals = []; 

            // 각 work-visual에 data-index와 data-project-id 할당
            workVisuals.forEach((visual, index) => {
                // 부모 work-item의 data-project-id를 기준으로 workVisuals의 data-project-id를 설정
                const projectId = visual.closest('.work-item').dataset.projectId;
                
                // 해당 프로젝트 내에서의 순서를 계산 
                const projectSiblings = Array.from(document.querySelectorAll(`.work-item[data-project-id="${projectId}"] .work-visual`));
                const indexInProject = projectSiblings.findIndex(v => v === visual);
                
                visual.dataset.projectIndex = indexInProject; // 프로젝트 내 순서 (0부터 시작)
                visual.dataset.globalIndex = index; // 전체 work-visual 내에서의 순서 (0부터 시작)
                visual.dataset.projectId = projectId; // 프로젝트 ID
            });
            
            // 모달 콘텐츠 업데이트 함수
            const updateModalContent = (projectIndex, projectId) => {
                // 현재 필터링된 배열 (filteredWorkVisuals)에서 해당 프로젝트 ID와 프로젝트 내 인덱스를 가진 요소 찾기
                const targetVisual = filteredWorkVisuals.find(v => 
                    v.dataset.projectIndex == projectIndex && v.dataset.projectId == projectId
                );
                
                if (targetVisual) {
                    modalImageContainer.innerHTML = targetVisual.innerHTML;
                    
                    // 현재 활성화된 모달의 상태를 업데이트: 프로젝트 내 인덱스 및 프로젝트 ID 사용
                    currentModalIndex = parseInt(targetVisual.dataset.projectIndex); 
                    currentModalProjectId = targetVisual.dataset.projectId;
                    
                    const correspondingWorkItem = targetVisual.closest('.work-item');
                    
                    if (correspondingWorkItem) {
                        // 모달 캡션은 `.work-header`의 전체 텍스트를 가져와서 표시합니다.
                        const headerText = correspondingWorkItem.querySelector('.work-header .full-description').textContent;
                        // 모달 캡션은 중앙 정렬을 유지하기 위해 별도의 구조를 사용합니다.
                        modalCaption.innerHTML = `<div class="work-header"><span class="full-description">${headerText}</span></div>`;
                    } else {
                        modalCaption.innerHTML = '';
                    }

                }
                updateNavButtons();
            };
            
            // 모달 버튼 상태 업데이트 함수
            const updateNavButtons = () => {
                // 현재 프로젝트 ID에 해당하는 이미지들만 필터링 (filteredWorkVisuals는 이미 필터링 상태일 수 있음)
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                const currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.projectIndex) === currentModalIndex); 
                
                if (currentIndexInProject <= 0) {
                    prevBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'block';
                }

                if (currentIndexInProject >= projectImages.length - 1) {
                    nextBtn.style.display = 'none';
                } else {
                    nextBtn.style.display = 'block';
                }
            };

            // 필터 초기화 (기본 5개 이미지 표시)
            const resetFilter = () => {
                // 1. 모든 항목을 숨김
                workItems.forEach(item => {
                    item.classList.add('hidden');
                });

                // 2. data-is-default="true"인 항목만 보이게 함 (요청한 5장의 이미지)
                const defaultItems = document.querySelectorAll('.work-item[data-is-default="true"]');
                defaultItems.forEach(item => {
                    item.classList.remove('hidden');
                });

                projectLinks.forEach(l => l.style.fontWeight = 'normal');
                activeFilterId = null;
                document.querySelector('.right-panel').scrollTop = 0;
                
                // ⭐ 텍스트 초기화 및 표시 ⭐
                workIntroText.textContent = 'Recently Exhibition';
                
                // 3. 모달에 사용될 filteredWorkVisuals 배열을 default 항목만으로 업데이트
                filteredWorkVisuals = Array.from(workVisuals).filter(visual => 
                    visual.closest('.work-item').dataset.isDefault === 'true'
                );

                // 모달 관련 상태 초기화
                currentModalIndex = 0;
                currentModalProjectId = null;
            };

            // 초기 로드 시 필터 리셋
            resetFilter(); 

            // 좌측 프로젝트 링크 클릭 이벤트 핸들러
            projectLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    const projectId = event.currentTarget.dataset.projectId;
                    const projectTitle = event.currentTarget.textContent; 
                    const customTitle = event.currentTarget.dataset.displayTitle;

                    if (projectId === activeFilterId) {
                        // 현재 활성화된 필터를 다시 클릭하면 리셋
                        resetFilter();
                    } else {
                        // 1. 모든 항목 숨김
                        workItems.forEach(item => {
                            item.classList.add('hidden');
                        });

                        // 2. 선택된 프로젝트 항목만 보이게 함
                        const selectedItems = document.querySelectorAll(`.work-item[data-project-id="${projectId}"]`);
                        selectedItems.forEach(item => {
                            item.classList.remove('hidden');
                        });
                        
                        activeFilterId = projectId;
                        
                        // ⭐ 텍스트 내용 업데이트: customTitle 우선 사용 ⭐
                        workIntroText.textContent = customTitle ? customTitle : projectTitle.trim();
                        
                        // 3. 필터링된 작업물 시각 요소 배열 업데이트
                        filteredWorkVisuals = Array.from(workVisuals).filter(visual => 
                            visual.closest('.work-item').dataset.projectId === projectId
                        );

                        // 4. 링크 스타일 업데이트
                        projectLinks.forEach(l => l.style.fontWeight = 'normal');
                        event.currentTarget.style.fontWeight = 'bold';
                        
                        document.querySelector('.right-panel').scrollTop = 0;
                    }
                });
            });

            // 상단 "Jonghwan Lee" 클릭 시 필터 리셋
            if (jhlReset) {
                jhlReset.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    resetFilter();
                });
            }
            
            // 작업물 이미지 클릭 (모달 열기)
            workVisuals.forEach(visual => {
                visual.addEventListener('click', () => {
                    const projectId = visual.dataset.projectId;
                    const projectIndex = parseInt(visual.dataset.projectIndex); 
                    
                    // 모달을 열 때, 클릭된 visual의 projectIndex와 projectId를 사용하여 콘텐츠를 업데이트합니다.
                    updateModalContent(projectIndex, projectId);
                    
                    modal.classList.add('show');
                });
            });
            
            // 모달 닫기 이벤트
            modalClose.addEventListener('click', () => {
                modal.classList.remove('show');
            });

            // 모달 외부 클릭 시 닫기
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.classList.remove('show');
                }
            });
            
            // 키보드 이벤트 (ESC, 좌/우 화살표)
            document.addEventListener('keydown', (event) => {
                if (modal.classList.contains('show')) {
                    if (event.key === 'Escape') {
                        modal.classList.remove('show');
                    } else if (event.key === 'ArrowLeft') {
                        prevBtn.click();
                    } else if (event.key === 'ArrowRight') {
                        nextBtn.click();
                    }
                }
            });

            // 이전 버튼 클릭
            prevBtn.addEventListener('click', () => {
                // 현재 모달의 projectId에 해당하는 filteredWorkVisuals 내의 항목만 가져옵니다.
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                let currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.projectIndex) === currentModalIndex);
                
                if (currentIndexInProject > 0) {
                    const prevVisual = projectImages[currentIndexInProject - 1];
                    updateModalContent(parseInt(prevVisual.dataset.projectIndex), prevVisual.dataset.projectId);
                }
            });

            // 다음 버튼 클릭
            nextBtn.addEventListener('click', () => {
                 // 현재 모달의 projectId에 해당하는 filteredWorkVisuals 내의 항목만 가져옵니다.
                const projectImages = filteredWorkVisuals.filter(v => v.dataset.projectId === currentModalProjectId);
                let currentIndexInProject = projectImages.findIndex(v => parseInt(v.dataset.projectIndex) === currentModalIndex);
                
                if (currentIndexInProject < projectImages.length - 1) {
                    const nextVisual = projectImages[currentIndexInProject + 1];
                    updateModalContent(parseInt(nextVisual.dataset.projectIndex), nextVisual.dataset.projectId);
                }
            });
        });
    </script>
</body>
</html>
